.search-container
	.search-container-inner
		h1(ng-if="q.$") #[i.glyphicon.glyphicon-search]
		input#search(type="search" ng-model="q.$" value="" placeholder="start typing..." ng-style="q.$ && {'margin-top': '3%'} || !q.$ && {'margin-top': '20%'}" ng-class="q.$ && test" autofocus).search.form-control
		.row.three-fourths.center
			.results-container(ng-if="q.$" ng-controller="searchResultsController")
				.row.center-justify
					label show
					| &nbsp;
					input.form-control.quantity(type="number" min="1" value="{{quantity}}" ng-model="quantity" ng-maxlength="4")
					| &nbsp;results
				tabset
					tab(heading="clients")
						table.table.table-hover.table-condensed.center
							thead
								tr
									th.col-md-1.clickable(ng-click="sort('id')") #
									th.col-md-9.clickable(ng-click="sort('name')") Client Name
									th.col-md-1.clickable(ng-click="sort('sites')") Sites
									th.col-md-1.clickable
							tbody
								tr(ng-repeat="client in clients | filter:q:strict | limitTo:quantity" ng-init="update()")
									td.col-md-1.success(ng-if="client.id.toLowerCase().indexOf(q.$.toLowerCase()) != -1") {{client.id}}
									td.col-md-1(ng-if="client.id.toLowerCase().indexOf(q.$.toLowerCase()) == -1") {{client.id}}
									td.col-md-9.success(ng-if="client.name.toLowerCase().indexOf(q.$.toLowerCase()) != -1") {{client.name}}
									td.col-md-9(ng-if="client.name.toLowerCase().indexOf(q.$.toLowerCase()) == -1") {{client.name}}
									td.col-md-1 {{client.sites.length}}
									td.col-md-1
										include modals/_clientDetails.jade
					tab(heading="web sites")
						div(ng-repeat="client in clients | filter:q:strict | limitTo:quantity" ng-controller="collapseController")
							h4(ng-if="client.sites.length > 0") {{client.name}}
							table.table.table-striped.table-hover.table-condensed.center.sites-table(ng-if="client.sites.length > 0")
								theads
									tr
										th.col-md-1 #
										th.col-md-3 Name
										th.col-md-7 URL
										th.col-md-1
								tbody
									tr(ng-repeat="site in client.sites | filter:q:strict | limitTo:quantity")
										td.col-md-1 {{site.id}}
										td.col-md-3 {{site.name || "None provided."}}
										td.col-md-7 {{site.url || site.logins.usernames[0] + ":" + site.logins.passwords[0] + "@" + site.logins.connections[0] + ", etc. (" + site.logins.connections.length + " total)"}}
											.collapsed(collapse="isCollapsed")
												br
												.row.head.shrunk
													.col-md-3 Type
													.col-md-3 Connection
													.col-md-3 Username
													.col-md-3 Password
												.row.body.shrunk(ng-repeat="login in site.logins.types track by $index")
													.body-wrapper(ng-controller="dataCopyController" tooltip="Click any field to select. Click again to deselect." tooltip-placement="left")
														.col-md-3(ng-click="toggleInput($event)") {{site.logins.types[$index] != null ? site.logins.types[$index] : "n/a"}}
														.col-md-3(ng-click="toggleInput($event)") {{site.logins.connections[$index] != null ? site.logins.connections[$index] : "n/a"}}
														.col-md-3(ng-click="toggleInput($event)") {{site.logins.usernames[$index] != null ? site.logins.usernames[$index] : "n/a"}}
														.col-md-3(ng-click="toggleInput($event)") {{site.logins.passwords[$index] != null ? site.logins.passwords[$index] : "n/a"}}
												br
										td.col-md-1.right-justify
											button.btn.btn-default.toggle(ng-click="isCollapsed = !isCollapsed")
												i.glyphicon.glyphicon-chevron-down(ng-if="isCollapsed")
												i.glyphicon.glyphicon-chevron-up(ng-if="!isCollapsed")
					tab(heading="logins")
						div(ng-repeat="client in clients | filter:q:strict | limitTo:quantity")
							table.table.table-striped.table-hover.table-condensed.center.sites-table(ng-repeat="site in client.sites track by $index")
								thead
									tr
										th {{client.name}} | {{site.name || site.logins.usernames[0] + ":" + site.logins.passwords[0] + "@" + site.logins.connections[0] + ", etc. (" + site.logins.connections.length + " total)"}}
								tbody
									tr
										td
											br
											.row.head.shrunk
												.col-md-3.not-padded Type
												.col-md-3.not-padded Connection
												.col-md-3.not-padded Username
												.col-md-3.not-padded Password
											.row.body.shrunk(ng-repeat="login in site.logins.types track by $index | filter:q:strict | limitTo:quantity")
												.body-wrapper(ng-controller="dataCopyController")
													.col-md-3.padded(ng-click="toggleInput($event)") {{site.logins.types[$index] != null ? site.logins.types[$index] : "n/a"}}
													.col-md-3.padded(ng-click="toggleInput($event)") {{site.logins.connections[$index] != null ? site.logins.connections[$index] : "n/a"}}
													.col-md-3.padded(ng-click="toggleInput($event)") {{site.logins.usernames[$index] != null ? site.logins.usernames[$index] : "n/a"}}
													.col-md-3.padded(ng-click="toggleInput($event)") {{site.logins.passwords[$index] != null ? site.logins.passwords[$index] : "n/a"}}
											br
				.row.center-justify
					button.btn.btn-primary(ng-if="results < clients.length" ng-click="showMore(quantity)") show {{quantity}} more


